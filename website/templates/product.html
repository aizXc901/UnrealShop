{% extends "base.html" %}

{% block title %}{{ product.name }} - UnrealShop{% endblock %}

{% block content %}
<div class="product-page">
    <div class="product-details">
        <img src="{{ url_for('static', filename=product.image) }}" alt="{{ product.name }}">
        <h2>{{ product.name }}</h2>
        <p class="price">{{ product.price | round(2) }} —Ä—É–±.</p>
        <p class="description">{{ product.description }}</p>

        {% if current_user.is_authenticated %}
            {% if cart_item %}
                <div class="quantity-controls" style="display: flex; align-items: center; justify-content: center; gap: 10px;">

                    <!-- –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ -->
                    <form action="{{ url_for('views.decrease_quantity', product_id=product.id) }}" method="POST">
                        <button type="submit" class="btn">-</button>
                    </form>

                    <!-- –ö–Ω–æ–ø–∫–∞ "–í –∫–æ—Ä–∑–∏–Ω—É" -->
                    <form action="{{ url_for('views.cart') }}">
                        <button type="submit" class="btn">üõí –î–æ–±–∞–≤–∏—Ç—å {{ cart_item.quantity }} –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                    </form>

                    <!-- –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ -->
                    <form action="{{ url_for('views.add_to_cart', product_id=product.id) }}" method="POST">
                        <button type="submit" class="btn">+</button>
                    </form>

                </div>
            {% else %}
                <form action="{{ url_for('views.add_to_cart', product_id=product.id) }}" method="POST">
                    <button type="submit" class="btn btn-add-to-cart">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                </form>
            {% endif %}
        {% else %}
            <a href="{{ url_for('auth.login') }}"><button class="btn btn-login">–í–æ–π—Ç–∏, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</button></a>
        {% endif %}

        <!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞ –≥–ª–∞–≤–Ω—É—é" -->
        <br><br>
        <a href="{{ url_for('views.home') }}" class="btn btn-back">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</div>
{% endblock %}
